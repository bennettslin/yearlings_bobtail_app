.overlay-popup-subfield {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    // Prevent lyric scrolling from pushing app offscreen.
    overflow: hidden;

    // Centre the audio section.
    display: flex;
    flex-direction: column;
    align-items: center;

    .overlay-popup-block {
        position: relative;
        width: 100%;

        &.AudioPopup-block {
            display: flex;
            justify-content: center;
        }

        &.main-popup-block {
            flex-grow: 1;
        }
    }

    .AudioPopup-block, .Audio {
        height: @menu-height;
    }

    .Popup {
        &.audio {
            display: flex;
            justify-content: center;
        }
    }

    .popup-wrapper.audio {
        flex-grow: 1;
        box-shadow: @popup-darker-box-shadow;
    }

    .popup-content-wrapper {
        box-sizing: border-box;

        &.annotation {
            box-shadow: @popup-box-shadow;
        }

        &.score, &.wiki, &.title {
            box-shadow: @popup-darker-box-shadow;
        }
    }
}

.is-desktop, .tablet-width {
    /**
     * In desktop and tablet, width of audio subfield in overlay is less than
     * width of screen.
     */
    .overlay-popup-subfield {
        .popup-wrapper.audio {
            overflow: hidden;
            border-radius: 15px;
        }
    }
}

.overlaid-annotation {
    .overlay-popup-subfield {
        .popup-content-wrapper {
            &.annotation {
                box-shadow: @popup-darker-box-shadow;
            }
        }
    }
}

// Styling for overlaid audio in phone, which has timer in audio section.
.phone-width {
    &.overlay-shown {

        .AudioBanner-custom-subfield {
            top: -@menu-height - @AudioBanner-custom-subfield-height - 2 * @AudioBanner-custom-subfield-padding;
        }

        .overlay-popup-subfield {

            @banner-margin: 5px;

            .Audio {
                align-items: flex-start;
            }

            .Audio, .AudioPopup-block {
                height: @app-icon-diameter * 2 + @banner-margin;
            }

            .AudioButtons-block, .AudioTimer-block, .AudioBanner-block {
                height: @app-icon-diameter;
            }

            .AudioButtons-block {
                max-width: 300px; // Also arbitrary.
            }

            .AudioTimer-block {
                flex-grow: 1;
                display: flex;
                justify-content: center;
                align-items: center;
                margin-right: @audio-block-padding;
            }

            .AudioBanner-block {
                position: absolute;
                bottom: 0;
                width: 100%;
            }

            .audio-display-block {
                display: none;
            }
        }
    }
}

.is-desktop {
    &.overlay-shown {

        // Only hide menu in desktop, because menu hides nav in mobile.
        .MenuField {
            top: -@menu-height;
        }

        .AudioBanner-custom-subfield {
            top: -@menu-height - @AudioBanner-custom-subfield-height - 2 * @AudioBanner-custom-subfield-padding;
        }
    }
}

.super-overlay {
    position: fixed;
    width: 100%;
    height: 100%;
}

// This prevents popup interaction when the slider is touched.
.slider-touched {
    .super-overlay {
        z-index: @super-overlay-z-index;
    }
}
