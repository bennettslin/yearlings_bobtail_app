@import "./Icon2.less";

@border__dot: 1px;

.icon-canvas-block {

    width: 100%;
    height: 100%;

    // Dot stanzas and nav need to hide overflow, popup buttons need to show.
    .Button:not(.overflowShown)
    & {
        overflow: hidden;
    }

    // Necessary?
    .Nav__showSingleBook
    & {
        transition: width @animationDuration__default;
    }

    .DotsSlideSelects
    &,
    .VerseAudioButton-block
    & {
        // Override default.
        overflow: visible;
    }

    /**
     * All dot backgrounds in lyrics and annotation cards, except portal
     * annotation cards.
     */
    .TextAnchorBlock
    &,
    .AnnotationCard:not(.portal)
    & {
        // Fade out first, then reduce width.
        transition: opacity @animationDuration__default,
                    width @animationDuration__default @animationDuration__faster;
        width: 0;
        opacity: 0;
    }

    .Button.Button__enabled
    & {
        transition: background-color @animationDuration__default,
        transform @animationDuration__instant;

        // Animate container itself, because its overflow is hidden.
        &:hover {
            animation: bounceHover @animationDuration__default;
        }

        &:active {
            transform: scale(0.9);
        }
    }
}

.icon-canvas {
    border-radius: 50%;
    background-color: @bgColour__audioDisabled;
    box-sizing: border-box;

    .Button__carouselSelect
    & {
        background-color: #d84;
    }

    .Button__carouselNavToggle
    & {
        background-color: #dfe;
    }

    .custom-shape
    & {
        border-radius: 0;
    }

    .DotsToggle
    & {
        background-color: purple;
    }

    .LyricToggle
    & {
        background-color: orange;
    }

    .Button__nav
    & {
        background-color: #dd8;
    }

    .Button__nav.selected
    & {
        background-color: orange;
    }

    .OverviewToggle
    & {
        background-color: #d84;
    }

    .Button__scores.Button__enabled
    & {
        background-color: #bdb;
    }

    .Button__tips
    & {
        background-color: #dbb;
    }

    .Button__title
    & {
        background-color: #d88;
    }

    .PopupButton
    & {
        box-shadow: @boxShadow__popupButton;
    }

    .PopupButton__close
    & {
        background-color: #fdd;
    }

    .PopupButton__side
    & {
        background-color: #dfd;
    }

    .anchor-block
    & {
        border: @border__dot solid @lyric-underline-enabled-colour;
    }

    .TextAnchorBlock
    & {
        width: @length__lyricAnchorDot;
    }
}

.icon-canvas {

    .LyricStanzaDot
    & {
        transition:
            background-color @animationDuration__fast,
            border @animationDuration__fast;
    }
}

// Hover styling.
.RM__narrative .TextAnchorBlock:hover .icon-canvas-block.narrative,
.RM__backstory .TextAnchorBlock:hover .icon-canvas-block.backstory,
.RM__observation .TextAnchorBlock:hover .icon-canvas-block.observation,
.RM__pun .TextAnchorBlock:hover .icon-canvas-block.pun,
.RM__reference .TextAnchorBlock:hover .icon-canvas-block.reference,
.RM__songwriting .TextAnchorBlock:hover .icon-canvas-block.songwriting,
.RM__portal .TextAnchorBlock:hover .icon-canvas-block.portal,
.RM__afterword .TextAnchorBlock:hover .icon-canvas-block.afterword {
   animation: bounceHover @animationDuration__slow;
}

// Active styling.
.RM__narrative .TextAnchorBlock:active .icon-canvas-block.narrative,
.RM__backstory .TextAnchorBlock:active .icon-canvas-block.backstory,
.RM__observation .TextAnchorBlock:active .icon-canvas-block.observation,
.RM__pun .TextAnchorBlock:active .icon-canvas-block.pun,
.RM__reference .TextAnchorBlock:active .icon-canvas-block.reference,
.RM__songwriting .TextAnchorBlock:active .icon-canvas-block.songwriting,
.RM__portal .TextAnchorBlock:active .icon-canvas-block.portal,
.RM__afterword .TextAnchorBlock:active .icon-canvas-block.afterword {
   transform: scale(0.8);
}

.DotsSlide,
.AnnotationPortal {
    .dot .icon-canvas {
        border: @border__dot solid @border__dot-colour;
    }
}

.DotsSlide {
    // Dots section and dot stanzas.
    .dot .icon-canvas {
        transition: background-color @animationDuration__fast;
    }
}
