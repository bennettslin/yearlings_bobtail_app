@import "./CarouselAnnotation.less";
@import "./CarouselSelect.less";
@import "./CarouselToggle.less";

/**
 * These constants are used only to determine carousel right side margin. The
 * carousel select itself does not use them.
 */

//  @width__carouselSelect:
//  @length__iconLarge * 2
//  + @margin__thin * 3;

@width__carouselSelect__tablet:
 @length__iconLarge__tablet * 2
 + @margin__thin * 3;

@width__carouselSelect__mini:
 @length__iconLarge__mini * 2
 + @margin__thin * 3;

.Carousel {
    position: absolute;
    left: 0;
    bottom: -100%;
    width: 100vw;
    height: 100%;

    // Allows the lyric to scroll when carousel has higher z-index.
    z-index: @zIndex__carousel;

    transition: bottom @animationDuration__slow,
                opacity @animationDuration__default;
    opacity: 0;

    ._mobileNotPhone_
    & {
        bottom: auto;
        transition: top @animationDuration__slow,
                    opacity @animationDuration__default;

        top: -100%;
        height: 100%;
    }

    ._carouselNavShowable_._carouselExpanded_
    &.renderReady {
        opacity: 1;
    }

    ._desktop_._carouselNavShowable_._carouselExpanded_
    & {
        bottom: 0;
    }

    ._mobileNotPhone_._carouselNavShowable_._carouselExpanded_
    & {
        top: 0;
    }
}

.Carousel__scrollParent {
    display: flex;
    overflow-x: scroll;
    height: 100%;

    ._desktop_
    & {
        padding-left: @width__overviewToggle__laptop;
    }

    ._tablet_
    & {
        padding-left: @width__overviewToggle__tablet;
    }

    ._mini_
    & {
        padding-left: @width__overviewToggle__mini;
    }

    /**
     * I'm baffled why padding-right can't just be applied to the scroll parent
     * itself here, the way padding-left can. But whatever, this works.
     */

    &:after {
        content: '';
    }

    ._monitor_
    &:after {
        padding-right:
            @js__width__goldenCord;
    }

    ._laptop_
    &:after {
        padding-right:
            @js__width__uncannyValley;
    }

    ._tablet_
    &:after {
        padding-right: @width__carouselSelect__tablet;
    }

    ._mini_
    &:after {
        padding-right: @width__carouselSelect__mini;
    }
}

/** Gradient mask does not work in IE or Edge, though. */
.Carousel__gradientMask__desktop {

    // Consider Golden Cord width.
    @gradient__carousel__monitor:
        linear-gradient(
            to left,
            black,
            transparent @js__width__goldenCord * 0.4,
            transparent @js__width__goldenCord * 0.6,
            black @js__width__goldenCord,
            black
        );
    ._monitor_._annotationHidden_
    & {
        // Not taken care of by autoprefixer, unfortunately.
        -webkit-mask-image: @gradient__carousel__monitor;
        mask-image: @gradient__carousel__monitor;
    }

    // Consider Uncanny Valley width.
    @gradient__carousel__laptop:
        linear-gradient(
            to left,
            black,
            transparent @js__width__uncannyValley * 0.4,
            transparent @js__width__uncannyValley * 0.6,
            black @js__width__uncannyValley,
            black
        );
    ._laptop_._annotationHidden_
    & {
        // Not taken care of by autoprefixer, unfortunately.
        -webkit-mask-image: @gradient__carousel__laptop;
        mask-image: @gradient__carousel__laptop;
    }

    ._desktop_._carouselNavShowable_._carouselExpanded_._annotationShown_
    & {
        // When carousel annotation is selected, switch z-index with lyric.
        z-index: @zIndex__lyricColumn;
    }
}