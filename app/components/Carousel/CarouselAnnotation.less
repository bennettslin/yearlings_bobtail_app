@paddingX__carouselAnnotation: 16px;

@paddingX__carouselAnnotation__hidden:
    @paddingX__carouselAnnotation * 2
    - @padding__annotation * 0.5;

.CarouselAnnotation {
    overflow-y: scroll;
    overflow-x: hidden;

    display: flex;
    flex-direction: column-reverse;

    min-width: @paddingX__carouselAnnotation__hidden;

    transition: min-width @animationDuration__default,
                opacity @animationDuration__default;

    .RM__desktop
    & {
        padding-bottom: @margin__scrollbar;
    }

    .RM__mobileNotPhone
    & {
        flex-direction: column;
    }

    &:not(:last-child) {
        margin-right:
            @padding__annotation * 0.5
            - @paddingX__carouselAnnotation * 2;
    }

    .overrideAnimate
    & {
        transition: none;
    }
}

// TODO: Revisit these.

.Annotation__title__inCarousel {
    transition: max-height @animationDuration__default,
    padding @animationDuration__default;
    overflow: hidden;
    max-height: 0;

    .Carousel.overrideAnimate
    & {
        transition: none;
    }
}

/**
 * Override if hidden by single lyric column. Using specific selectors to
 * override styles for mini width as well.
 */
.RootManager.RM__song.RM__rightLyricColumnOnly
&.CarouselAnnotation__inLyricColumn__left,
.RootManager.RM__song.RM__leftLyricColumnOnly
&.CarouselAnnotation__inLyricColumn__right {

    min-width: @paddingX__carouselAnnotation__hidden;

    .Annotation__title__inCarousel {
        max-height: 0;
    }
}

.RM__narrative .CarouselAnnotation__narrative,
.RM__backstory .CarouselAnnotation__backstory,
.RM__observation .CarouselAnnotation__observation,
.RM__pun .CarouselAnnotation__pun,
.RM__reference .CarouselAnnotation__reference,
.RM__songwriting .CarouselAnnotation__songwriting,
.RM__portal .CarouselAnnotation__portal,
.RM__afterword .CarouselAnnotation__afterword {

    min-width: @minWidth__carouselAnnotation;

    .Annotation__title__inCarousel {
        max-height: 2em; // Arbitrary value that's larger than its max height.
        min-height: @length__iconSmall;
        padding: @padding__annotation 0;
    }
}

.RM__mini.RM__narrative .CarouselAnnotation__narrative,
.RM__mini.RM__backstory .CarouselAnnotation__backstory,
.RM__mini.RM__observation .CarouselAnnotation__observation,
.RM__mini.RM__pun .CarouselAnnotation__pun,
.RM__mini.RM__reference .CarouselAnnotation__reference,
.RM__mini.RM__songwriting .CarouselAnnotation__songwriting,
.RM__mini.RM__portal .CarouselAnnotation__portal,
.RM__mini.RM__afterword .CarouselAnnotation__afterword {

    min-width: @minWidth__carouselAnnotation__mini;
}