@dots-overview-subfield-margin: @app-thin-margin;

@overview-toggle-width: 100px;
@overview-toggle-height: 150px;

@overview-toggle-laptop-width: @overview-toggle-width / 1.5;
@overview-toggle-laptop-height: @overview-toggle-height / 1.5;

@overview-toggle-tablet-width: @overview-toggle-width / 1.7;
@overview-toggle-tablet-height: @overview-toggle-height / 1.7;

@overview-toggle-mini-width: @overview-toggle-width / 2;
@overview-toggle-mini-height: @overview-toggle-height / 2;

@overview-toggle-phone-width: @overview-toggle-width / 2.5;
@overview-toggle-phone-height: @overview-toggle-height / 2.5;

@toggle-animation-duration: 0.2s;

// In main field.
.dots-overview-subfield {
    width: 100%;
    height: 100%;
    display: flex;

    // Ensure overview is below lyrics.
    z-index: @dots-overview-subfield-z-index;
}

// Toggle container.
.dots-overview-toggle-section {
    position: relative;
    height: 100%;
    width: @overview-toggle-width;

    // Ensure toggle button is above its popup container.
    z-index: @overview-toggle-z-index;

    display: flex;
    flex-direction: column;

    background-color: rgba(190, 210, 225, 0.5);
}

// Animated container for toggle button.
.overview-toggle-button-container {
    width: 100%;
    height: @overview-toggle-height;

    .transition(margin @toggle-animation-duration ease);
    margin-left: 0;

    background-color: #d84;
}

.overview-toggle-button {
    position: absolute;
    width: 100%;
    height: 100%;
}

// Hidden to left when is logue.
.is-logue, .annotation-shown {
    .dots-overview-toggle-section {
        .overview-toggle-button-container {
            margin-left: ~"calc(-100% - @{dots-overview-subfield-margin})"
        }
    }
}

.dots-row {
    flex-grow: 1;
}

// Responsive rules.
.is-desktop {

    // Overview is at the top in desktop.
    .overview-toggle-button-container, .overview.popup-content-wrapper {
        top: 0;
    }

    &.laptop-width {

        .dots-overview-toggle-section {
            width: @overview-toggle-laptop-width;
        }

        .overview-toggle-button-container {
            height: @overview-toggle-laptop-height;
        }
    }
}

.is-mobile {

    // Hidden to left when lyric expanded.
    .lyric-expanded {
        .dots-overview-toggle-section {
            .overview-toggle-button-container {
                margin-left: ~"calc(-100% - @{dots-overview-subfield-margin})"
            }
        }
    }

    // Overview is at the bottom in mobile.
    .overview-toggle-button-container, .overview.popup-content-wrapper {
        bottom: 0;
    }

    .dots-overview-toggle-section {
        width: @overview-toggle-tablet-width;
        flex-direction: column-reverse;
    }

    .overview-toggle-button-container {
        height: @overview-toggle-tablet-height;
    }

    &.mini-width {
        .dots-overview-toggle-section {
            width: @overview-toggle-mini-width;
        }

        .overview-toggle-button-container {
            height: @overview-toggle-mini-height;
        }
    }

    &.phone-width {
        // Hidden to left when overview is shown.
        .overview-shown {
            .dots-overview-toggle-section {
                .overview-toggle-button-container {
                    margin-left: ~"calc(-100% - @{dots-overview-subfield-margin})"
                }
            }
        }

        .dots-overview-toggle-section {
            width: @overview-toggle-phone-width;
            height: 100%;
        }

        // Inside overview bubble.
        .overview-toggle-section {
                position: relative;
                width: @overview-toggle-phone-width;
                height: @overview-toggle-phone-height;
                margin-right: 10px;
                float: left;
        }

        .overview-toggle-button-container {
            height: @overview-toggle-phone-height;
        }

        .overview-toggle-button-container, .overview.popup-content-wrapper {
            min-width: 100%;
        }
    }
}
