/* Styling for lyrics line, verse, and verse bar. */

@lyrics-audio-button-block-width: 1.5em;

.lyrics-block {
    .verse {
        @verse-padding: 10px;
        padding-left: @verse-padding;
        padding-right: @verse-padding;

        .transition(~"color 0.15s ease, background-color 0.15s ease");

        &:first-child {
            padding-top: @verse-padding;
            .lyrics-audio-button-block {
                margin-top: -@verse-padding;
                .lyrics-audio-button-child {
                    padding-top: @verse-padding;
                }
            }
        }
        &:last-child {
            padding-bottom: @verse-padding;
            .lyrics-audio-button-block {
                .lyrics-audio-button-child {
                    padding-bottom: @verse-padding;
                }
            }
        }

        &.interactable {
            position: relative;

            // Make all this styling better, obviously.
            &.interactivated {

                .lyrics-audio-button-block {
                    &.audio-button-enabled {
                        left: -@lyrics-audio-button-block-width * 0.8;
                    }
                }

                .lyrics-audio-button {
                    opacity: 1;
                    font-size: 1em;
                    animation: fontSnapback 0.16s ease;
                }
            }

            &.interactivated {
                box-shadow: inset 0 0 5px @darker-box-shadow-colour;
            }
        }
    }

    .lyrics-audio-button-block {
        position: absolute;
        left: 0;
        height: 100%;
        width: @lyrics-audio-button-block-width;

        .transition(left 0.15s ease);

        // Either button or icon.
        .lyrics-audio-button-child {
            box-sizing: border-box;
            height: 100%;
            width: 100%;
            font-size: 1em;
            display: flex;
            justify-content: center;
            align-items: center;

            .transition(~"opacity 0.2s ease, font 0.2s ease");
        }

        .lyrics-audio-button {
            position: relative;
            font-size: 0.1em;
            opacity: 0;
            z-index: @lyrics-audio-button-z-index;

            .lyrics-audio-icon {
                width: @lyrics-audio-button-block-width;
                height: @lyrics-audio-button-block-width;
            }
        }
    }
}

.verse .anchor-block, .portal-anchor {

    white-space: nowrap;

    // Underline anchor tag.
    .underline-bar {
        .transition(background-color 0.15s ease);

        position: absolute;
        width: 100%;
        height: 35%;
        bottom: 0;
        left: 0;
    }

    &.show-as-anchor {
        &:not(.portal-anchor) {
            .underline-bar {
                background-color: mix(gray, white, 15%);
            }

            &.enabled {
                .underline-bar {
                    background-color: mix(@lyric-link-colour, white, 25%);
                }
            }
        }

        &.portal-anchor {
            .underline-bar {
                background-color: @portal-text-colour;
            }
        }
    }
}

/**
 * Verse colours.
 */

.is-playing {
    .slider-not-moving {
        &.verse-bar-hidden .verse.selected {
            background-color: @audio-play-colour;

            .anchor-block {
                text-shadow:
                -@text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-play-colour,
                @text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-play-colour,
                -@text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-play-colour,
                @text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-play-colour;
            }
        }

        .verse-bar {
            background-color: @audio-play-colour;
        }
    }
}

.is-paused {
    .slider-not-moving {
        &.verse-bar-hidden .verse.selected {
            background-color: @audio-pause-colour;

            .anchor-block {
                text-shadow:
                -@text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-pause-colour,
                @text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-pause-colour,
                -@text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-pause-colour,
                @text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-pause-colour;
            }
        }

        .verse-bar {
            background-color: @audio-pause-colour;
        }
    }
}

.slider-moving {
    .verse-bar {
        background-color: @audio-neutral-colour;
    }
}

.slider-not-moving .verse {
    &.odd, &.in-side {
        background-color: @odd-verse-colour;

        .anchor-block {
            text-shadow:
            -@text-shadow-offset -@text-shadow-offset @text-shadow-blur @odd-verse-colour,
            @text-shadow-offset -@text-shadow-offset @text-shadow-blur @odd-verse-colour,
            -@text-shadow-offset @text-shadow-offset @text-shadow-blur @odd-verse-colour,
            @text-shadow-offset @text-shadow-offset @text-shadow-blur @odd-verse-colour;
        }
    }
}

.slider-not-moving .even, .slider-moving .in-side {
    &.verse {
        background-color: @even-verse-colour;

        .anchor-block {
            text-shadow:
            -@text-shadow-offset -@text-shadow-offset @text-shadow-blur @even-verse-colour,
            @text-shadow-offset -@text-shadow-offset @text-shadow-blur @even-verse-colour,
            -@text-shadow-offset @text-shadow-offset @text-shadow-blur @even-verse-colour,
            @text-shadow-offset @text-shadow-offset @text-shadow-blur @even-verse-colour;
        }
    }
}

.slider-not-moving {

    .verse {
        &.hoverable:hover {
            background-color: @audio-highlight-colour;

            .anchor-block {
                text-shadow:
                -@text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-highlight-colour,
                @text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-highlight-colour,
                -@text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-highlight-colour,
                @text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-highlight-colour;
            }
        }
    }
}

.slider-moving {

    .verse.before-slider {
        background-color: @audio-spent-colour;

        .anchor-block {
            text-shadow:
            -@text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-spent-colour,
            @text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-spent-colour,
            -@text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-spent-colour,
            @text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-spent-colour;
        }
    }

    .verse.after-slider {
        background-color: @audio-remain-colour;

        .anchor-block {
            text-shadow:
            -@text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-remain-colour,
            @text-shadow-offset -@text-shadow-offset @text-shadow-blur @audio-remain-colour,
            -@text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-remain-colour,
            @text-shadow-offset @text-shadow-offset @text-shadow-blur @audio-remain-colour;
        }
    }
}

// TODO: Make this styling better, of course.
.verse-bar-block {
    position: absolute;
    width: 100%;
    z-index: @selected-verse-bar-z-index;

    @verse-bar-margin: 8px;

    &.above {
        top: -50px;
        margin-top: @verse-bar-margin;
        .transition(~"top 0.15s ease, transform 0.15s ease");
    }

    &.below {
        bottom: -50px;
        margin-bottom: @verse-bar-margin;
        .transition(~"bottom 0.15s ease, transform 0.15s ease");

        .verse-bar {
            box-shadow: 0 0 12px 5px @darker-box-shadow-colour;
        }
    }

    transform: scale(0);
}

.verse-above {
    .verse-bar-block {
        &.above {
            top: 0;
            transform: scale(1);
        }
    }
}

.verse-below {
    .verse-bar-block {
        &.below {
            bottom: 0;
            transform: scale(1);
        }
    }
}

.verse-bar {
    max-width: 100%;

    margin: 0 5px;
    padding: 10px 15px;
    border-radius: 10px;
    cursor: pointer;

    box-shadow: 0 3px 12px 5px @darker-box-shadow-colour;
}
